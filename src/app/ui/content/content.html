<div class="content-wrapper">
  @if (store.loading()) {
  <div class="center">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  </div>
  } @else if (store.error()) {
  <div class="center-error">{{ store.error() }}</div>
  } @else { @if (store.viewMode() === 'grid') {
  <div class="grid">
    @for (f of store.currentFolders(); track f.id) {
    <div class="tile folder" (click)="go(f.id)">
      <mat-icon>folder</mat-icon>
      <div class="name">{{ f.name }}</div>
    </div>
    } @for (fl of store.currentFiles(); track fl.id){
    <div class="tile file">
      <mat-icon>insert_drive_file</mat-icon>
      <div class="name">{{ fl.name }}</div>
    </div>
    } @if (store.currentFiles().length === 0 && store.currentFolders().length === 0) {
    <div class="center-empty">Empty</div>
    }
  </div>
  } @else {
  <div class="list">
    <div class="row header">
      <div class="col name">Name</div>
      <div class="col type">Type</div>
      <div class="col size">Size</div>
      <div class="col updated">Last Updated</div>
    </div>
    @for (f of store.currentFolders(); track f.id) {
    <div class="row item" (click)="go(f.id)">
      <div class="col name"><mat-icon class="mr">folder</mat-icon> {{ f.name }}</div>
      <div class="col type">Folder</div>
      <div class="col size">-</div>
      <div class="col updated">{{ f.createdAt | date : 'mediumDate' }}</div>
    </div>
    } @for (fl of store.currentFiles(); track fl.id) {
    <div class="row item" (click)="openFile(fl.id)">
      <div class="col name"><mat-icon class="mr">insert_drive_file</mat-icon> {{ fl.name }}</div>
      <div class="col type">{{ fl.mime || 'File' }}</div>
      <div class="col size">{{ fl.size | number }}</div>
      <div class="col updated">{{ fl.updatedAt | date : 'mediumDate' }}</div>
    </div>
    }
    @if (store.currentFolders().length === 0 && store.currentFiles().length === 0) {
      <div class="row empty">Empty</div>
    }
  </div>
  } }
</div>
